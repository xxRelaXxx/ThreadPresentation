<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Threads Presentation</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    },
                    colors: {
                        'java-orange': '#f89820',
                        'java-blue': '#5382a1',
                        'code-bg': '#1e1e1e',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Fira+Code:wght=400;500&display=swap');

        /* --- Intro Screen Styles --- */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            opacity: 1;
            transition: opacity 0.6s ease-out;
        }

        #intro-screen.fade-out {
            opacity: 0;
            pointer-events: none;
            visibility: hidden;
        }

        .intro-title {
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            background: linear-gradient(90deg, #5382a1 0%, #f89820 50%, #5382a1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titlePulse 3s ease-in-out infinite;
            text-align: center;
        }

        @keyframes titlePulse {
            0% {
                opacity: 0.5;
                transform: scale(0.95);
                letter-spacing: 0.1em;
            }
            50% {
                opacity: 1;
                transform: scale(1);
                letter-spacing: 0.2em;
            }
            100% {
                opacity: 0.5;
                transform: scale(0.95);
                letter-spacing: 0.1em;
            }
        }

        .intro-logos {
            display: flex;
            gap: 3rem;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .intro-logo {
            font-size: 3rem;
            animation: logoFloat 3s ease-in-out infinite;
        }

        .intro-logo:nth-child(1) {
            animation-delay: 0s;
            color: #f89820;
        }

        .intro-logo:nth-child(2) {
            animation-delay: 0.5s;
            color: #5382a1;
        }

        .intro-logo:nth-child(3) {
            animation-delay: 1s;
            color: #f89820;
        }

        @keyframes logoFloat {
            0%, 100% {
                transform: translateY(0px);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-20px);
                opacity: 1;
            }
        }

        .intro-subtitle {
            font-size: 1.5rem;
            color: #cbd5e1;
            text-align: center;
            animation: fadeInUp 2s ease-out 0.5s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Custom styles for full-page scroll snapping */
        #presentation-container {
            scroll-snap-type: y mandatory;
            height: 100vh;
            overflow-y: scroll;
            -ms-overflow-style: none;
            scrollbar-width: none;
            scroll-behavior: smooth;
        }

        #presentation-container::-webkit-scrollbar {
            display: none;
        }

        .slide {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            background: transparent;
        }

        /* Background blur overlay (sits above the Three.js canvas but behind slides/UI) */
        #bg-blur-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* above canvas (-2) but below normal content (0) */
            pointer-events: none;
            backdrop-filter: blur(6px) saturate(1.15);
            -webkit-backdrop-filter: blur(6px) saturate(1.15);
            background: rgba(8, 10, 18, 0.10); /* subtle darken to improve contrast */
        }

        /* --- Animations --- */
        .slide-content {
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: center;
        }

        .slide[data-active="true"] .slide-content {
            opacity: 1;
            transform: scale(1);
        }

        /* --- Navigation Button Styles --- */
        .nav-button {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 50;
            cursor: pointer;
            width: 3.5rem; 
            height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(248, 152, 32, 0.8); /* Java Orange */
            color: white;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .nav-button:hover {
            background-color: #f89820;
            transform: translateY(-50%) scale(1.1);
        }
        
        .nav-up { left: 1.5rem; }
        .nav-down { right: 1.5rem; }

        /* Hide buttons on mobile */
        @media (max-width: 768px) {
            .nav-button { display: none !important; }
        }
        
        /* --- Progress Bar --- */
        #progress-bar-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 8px;
            z-index: 60;
            background-color: rgba(0, 0, 0, 0.5);
        }

        #progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #5382a1, #f89820);
            transition: width 0.5s ease-in-out;
            border-radius: 0 4px 4px 0;
        }

        /* --- Card Styles --- */
        .glass-card {
            background: rgba(30, 41, 59, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* --- Code Block Placeholder Style --- */
        .code-placeholder {
            font-family: 'Fira Code', monospace;
            background: linear-gradient(135deg, #1e1e1e 0%, #252526 100%);
            border-left: 4px solid #f89820;
            border-radius: 0.5rem;
            color: #d4d4d4;
            padding: 0;
            width: 100%;
            text-align: left;
            position: relative;
            overflow: auto;
            white-space: pre;
            word-wrap: normal;
            line-height: 1.6;
            font-size: 0.95rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(248, 152, 32, 0.2);
            display: flex;
            flex-direction: column;
            margin-bottom: 0.5rem;
        }
        
        .code-placeholder::before {
            content: "Java Source File";
            position: sticky;
            top: 0;
            right: 0;
            background: linear-gradient(90deg, #f89820 0%, #ff6b1a 100%);
            color: #fff;
            font-size: 0.7rem;
            padding: 0.5rem 0.8rem;
            border-bottom-left-radius: 0.5rem;
            font-weight: 700;
            z-index: 10;
            display: block;
            float: right;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .code-wrapper {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .code-wrapper .copy-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #f89820 0%, #ff6b1a 100%);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 0.4rem;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(248, 152, 32, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            width: fit-content;
        }

        .code-wrapper .copy-button:hover {
            background: linear-gradient(135deg, #ff6b1a 0%, #f89820 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(248, 152, 32, 0.5);
        }

        .code-wrapper .copy-button:active {
            transform: translateY(0px);
            box-shadow: 0 2px 8px rgba(248, 152, 32, 0.3);
        }

        .code-wrapper .copy-button.copied {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .code-placeholder pre {
            margin: 0;
            padding: 2rem;
            overflow: inherit;
            flex: 1;
        }

        /* Table specific styles for Slide 21 */
        .control-table th {
            background-color: #2d3748;
            color: #f89820;
            padding: 1rem;
            text-align: left;
        }
        .control-table td {
            padding: 1rem;
            border-bottom: 1px solid #4a5568;
        }

        /* Mobile table scrollability */
        @media (max-width: 640px) {
            .overflow-hidden {
                overflow-y: auto !important;
                max-height: 60vh;
            }
            table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }

            /* Stack code example slides vertically on mobile */
            .grid.grid-cols-2 {
                grid-template-columns: 1fr !important;
            }

            /* Ensure code placeholders are full width and properly sized on mobile */
            .code-placeholder {
                max-height: 400px;
                margin-top: 2rem;
            }
        }

        /* --- Glowing Method Control Boxes --- */
        .method-box {
            transition: all 0.3s ease;
            cursor: default;
            border: 2px solid transparent;
        }

        .method-box.green-400 {
            border-color: #4ade80;
        }
        .method-box.green-400:hover {
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.5), 0 0 40px rgba(74, 222, 128, 0.25);
            border-color: #4ade80;
            transform: scale(1.05);
        }

        .method-box.red-400 {
            border-color: #f87171;
        }
        .method-box.red-400:hover {
            box-shadow: 0 0 20px rgba(248, 113, 113, 0.5), 0 0 40px rgba(248, 113, 113, 0.25);
            border-color: #f87171;
            transform: scale(1.05);
        }

        .method-box.yellow-400 {
            border-color: #facc15;
        }
        .method-box.yellow-400:hover {
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.5), 0 0 40px rgba(250, 204, 21, 0.25);
            border-color: #facc15;
            transform: scale(1.05);
        }

        .method-box.java-blue {
            border-color: #5382a1;
        }
        .method-box.java-blue:hover {
            box-shadow: 0 0 20px rgba(83, 130, 161, 0.5), 0 0 40px rgba(83, 130, 161, 0.25);
            border-color: #5382a1;
            transform: scale(1.05);
        }

        .method-box.slate-500 {
            border-color: #64748b;
        }
        .method-box.slate-500:hover {
            box-shadow: 0 0 20px rgba(100, 116, 139, 0.5), 0 0 40px rgba(100, 116, 139, 0.25);
            border-color: #64748b;
            transform: scale(1.05);
        }

            /* --- Confetti Animation --- */
            @keyframes confetiFall {
                0% {
                    transform: translateY(0) translateX(0) rotate(0deg);
                    opacity: 1;
                }
                30% {
                    /* Blast up */
                    transform: translateY(-60vh) translateX(calc(var(--drift, 0px) * 1)) rotate(360deg);
                    opacity: 1;
                }
                100% {
                    /* Fall down out of view */
                    transform: translateY(120vh) translateX(calc(var(--drift, 0px) * 0.5)) rotate(720deg);
                    opacity: 0;
                }
            }

            .confetti {
                position: fixed;
                bottom: -10px;
                pointer-events: none;
                z-index: 1500;
                will-change: transform, opacity;
                border-radius: 2px;
                animation: confetiFall var(--duration, 2.4s) cubic-bezier(.2,.8,.2,1) var(--delay, 0s) forwards;
            }

        /* --- Mobile-specific adjustments for better readability on phones --- */
        @media (max-width: 640px) {
            /* Disable full-page scroll-snap on small screens for easier reading */
            #presentation-container { scroll-snap-type: none; }
            .slide { height: auto; min-height: 0; }
            /* Reduce big intro/title sizes */
            .intro-title { font-size: 2.2rem; letter-spacing: .06em; }
            .intro-logo { font-size: 2rem; }
            .intro-subtitle { font-size: 1rem; }

            /* Slide container adjustments */
            .slide { padding: 1rem; }
            .slide-content { max-width: 95%; padding: 0.5rem; flex-direction: column; align-items: flex-start; }

            /* Scale common text utility classes for mobile */
            .text-7xl { font-size: 2rem !important; }
            .text-6xl { font-size: 1.75rem !important; }
            .text-5xl { font-size: 1.6rem !important; }
            .text-4xl { font-size: 1.35rem !important; }
            .text-3xl { font-size: 1.2rem !important; }
            .text-2xl { font-size: 1rem !important; }
            .text-xl  { font-size: 0.95rem !important; }
            .text-lg  { font-size: 0.9rem !important; }
            .text-sm  { font-size: 0.8rem !important; }

            /* Reduce spacing to fit more content */
            .glass-card { padding: 0.75rem; border-radius: 1rem; }

            /* Make pre/code blocks wrap and smaller font */
            pre, code { font-size: 0.8rem !important; white-space: pre-wrap; word-break: break-word; }

            /* Stack method boxes and shrink them */
            .method-box { padding: 0.6rem !important; font-size: 0.9rem !important; }

            /* Ensure images fit and do not overflow */
            img { max-width: 100%; height: auto; }

            /* Make progress bar thinner on phones */
            #progress-bar-container { height: 5px; }
        }

    </style>
</head>
<body class="bg-slate-900 text-white font-sans antialiased selection:bg-java-orange selection:text-white">

    <!-- INTRO SCREEN -->
    <div id="intro-screen">
        <h1 class="intro-title">JAVA THREADS</h1>
        <div class="intro-logos">
            <div class="intro-logo"><i class="fa-brands fa-java"></i></div>
            <div class="intro-logo"><i class="fa-solid fa-code"></i></div>
            <div class="intro-logo"><i class="fa-brands fa-java"></i></div>
        </div>
        <p class="intro-subtitle">Presentato da Roman Bernatskyi</p>
    </div>

    <div id="presentation-container">

        <!-- SLIDE 1: Title -->
        <section id="slide-1" class="slide">
            <div class="slide-content">
                <div class="text-center space-y-6 max-w-4xl">
                    <div class="inline-block px-4 py-2 rounded-full border border-java-orange text-java-orange font-mono text-sm mb-4">CS 101: Advanced Java</div>
                    <h1 class="text-7xl font-extrabold tracking-tight">
                        Java Threads<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-java-blue to-java-orange">Creation, Usage, & Control</span>
                    </h1>
                    <p class="text-2xl text-slate-300 font-light mt-6">
                        Padronanza della Concorrenza con 3 Esempi Personalizzati di Client/Server
                    </p>
                    <div class="mt-12 pt-8 border-t border-slate-700">
                        <p class="text-lg text-slate-400">Presentato da Roman Bernatskyi (RelaX)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 2: What is a Thread? -->
        <section id="slide-2" class="slide">
            <div class="slide-content">
                <div class="glass-card p-12 w-full max-w-5xl flex flex-col md:flex-row items-center gap-12">
                    <div class="flex-1 space-y-6">
                        <h2 class="text-5xl font-bold text-java-orange">Cos'è un Thread?</h2>
                        <p class="text-xl text-slate-300 leading-relaxed">
                            Un thread è la più piccola unità di esecuzione all'interno di un processo. Pensa a esso come un "percorso" di esecuzione separato.
                        </p>
                        <div class="bg-slate-800/50 p-6 rounded-xl border-l-4 border-java-blue">
                            <p class="text-lg text-white">
                                <i class="fa-solid fa-lightbulb text-yellow-400 mr-2"></i>
                                Mentre un <strong>Process</strong> è un programma completo (come aprire Word), un <strong>Thread</strong> è un'attività specifica che accade al suo interno (come digitare mentre il controllo ortografico funziona).
                            </p>
                        </div>
                    </div>
                    <div class="flex-1 flex justify-center">
                        <img src="assets/pt.png" class="rounded-lg shadow-2xl max-w-full h-auto max-h-[400px] md:max-h-[500px] object-contain" alt="Thread Diagram">
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 3: Why Do We Use Threads? -->
        <section id="slide-3" class="slide">
            <div class="slide-content">
                <div class="w-full max-w-6xl">
                    <h2 class="text-5xl font-bold mb-12 text-center">Perché Usiamo i Thread?</h2>
                    <div class="grid grid-cols-2 gap-8">
                        <div class="glass-card p-8 hover:bg-slate-700 transition">
                            <i class="fa-solid fa-bolt text-4xl text-java-orange mb-4"></i>
                            <h3 class="text-2xl font-bold mb-2">Attività Parallele</h3>
                            <p class="text-slate-400">Eseguire più operazioni simultaneamente, utilizzando efficientemente i moderni CPU multi-core.</p>
                        </div>
                        <div class="glass-card p-8 hover:bg-slate-700 transition">
                            <i class="fa-solid fa-network-wired text-4xl text-java-blue mb-4"></i>
                            <h3 class="text-2xl font-bold mb-2">Gestione dei Client</h3>
                            <p class="text-slate-400">I server devono gestire centinaia di utenti contemporaneamente. Un thread per cliente garantisce che nessuno aspetti in coda.</p>
                        </div>
                        <div class="glass-card p-8 hover:bg-slate-700 transition">
                            <i class="fa-solid fa-ghost text-4xl text-purple-400 mb-4"></i>
                            <h3 class="text-2xl font-bold mb-2">Lavoro in Background</h3>
                            <p class="text-slate-400">Eseguire calcoli pesanti, I/O su file o query su database senza congelare l'applicazione principale.</p>
                        </div>
                        <div class="glass-card p-8 hover:bg-slate-700 transition">
                            <i class="fa-solid fa-stopwatch text-4xl text-green-400 mb-4"></i>
                            <h3 class="text-2xl font-bold mb-2">Reattività</h3>
                            <p class="text-slate-400">Mantenere l'interfaccia utente (User Interface) reattiva anche durante l'elaborazione pesante in background.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 4: The 3 Creation Methods -->
        <section id="slide-4" class="slide">
            <div class="slide-content">
                <div class="text-center w-full max-w-4xl">
                    <h2 class="text-5xl font-bold mb-8">I 3 Metodi di Creazione dei Thread in Java</h2>
                    <p class="text-xl text-slate-400 mb-12">Vedremo un esempio reale per ciascuno.</p>
                    
                    <div class="space-y-6">
                        <div class="flex items-center p-6 bg-slate-800 rounded-xl border border-slate-700">
                            <div class="h-12 w-12 bg-java-orange rounded-full flex items-center justify-center font-bold text-2xl mr-6">1</div>
                            <div class="text-left">
                                <h3 class="text-2xl font-bold">Extend Thread</h3>
                                <p class="text-slate-400">L'approccio classico e diretto.</p>
                            </div>
                        </div>
                        <div class="flex items-center p-6 bg-slate-800 rounded-xl border border-slate-700">
                            <div class="h-12 w-12 bg-java-blue rounded-full flex items-center justify-center font-bold text-2xl mr-6">2</div>
                            <div class="text-left">
                                <h3 class="text-2xl font-bold">Implement Runnable</h3>
                                <p class="text-slate-400">L'approccio funzionale e flessibile.</p>
                            </div>
                        </div>
                        <div class="flex items-center p-6 bg-slate-800 rounded-xl border border-slate-700 relative group">
                            <div class="absolute top-2 right-2 bg-green-500 rounded-full w-10 h-10 flex items-center justify-center shadow-lg">
                                <i class="fa-solid fa-star text-white text-lg"></i>
                            </div>
                            <div class="h-12 w-12 bg-purple-500 rounded-full flex items-center justify-center font-bold text-2xl mr-6">3</div>
                            <div class="text-left flex-1">
                                <h3 class="text-2xl font-bold">ExecutorService / Thread Pools</h3>
                                <p class="text-slate-400">L'approccio professionale e scalabile.</p>
                            </div>
                            <span class="absolute top-14 right-2 bg-green-500 text-white px-3 py-1 rounded-lg text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Advanced</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 5: 1) Extending Thread (Concept) -->
        <section id="slide-5" class="slide">
            <div class="slide-content">
                <div class="glass-card p-12 max-w-4xl w-full">
                    <div class="flex items-center mb-8">
                        <span class="text-8xl font-bold text-slate-700 mr-8">1</span>
                        <h2 class="text-5xl font-bold text-java-orange">Estendere Thread (Concetto)</h2>
                    </div>
                    <ul class="space-y-6 text-xl text-slate-300 ml-4 list-disc pl-6">
                        <li><strong class="text-white">Class IS a thread:</strong> La tua classe eredita direttamente dalla classe <code>Thread</code>.</li>
                        <li><strong class="text-white">Override <code>run()</code>:</strong> Devi implementare il metodo <code>run()</code>, che contiene la logica che verrà eseguita dal nuovo thread.</li>
                        <li><strong class="text-white">Call <code>.start()</code>:</strong> Questo è il comando chiave che dice alla JVM di lanciare un nuovo thread e chiamare il metodo <code>run()</code> in modo asincrono.</li>
                        <li><strong class="text-white">Simple but not flexible:</strong> È diretto, ma la regola dell'ereditarietà singola di Java impedisce alla classe di estendere qualcos'altro.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SLIDE 6: Example #1: Extending Thread -->
        <section id="slide-6" class="slide">
            <div class="slide-content">
                <div class="w-full max-w-6xl grid grid-cols-2 gap-8 items-center">
                    <div>
                        <h2 class="text-4xl font-bold text-java-orange mb-6">Esempio #1: Estendere Thread</h2>
                        <div class="space-y-4 text-slate-300">
                            <p>Questa è la nostra simulazione di <strong>Client che si connette</strong> utilizzando questo metodo.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Ogni Client è un thread separato:</strong> Gli oggetti Client <code>c1</code> e <code>c2</code> sono thread worker indipendenti.</li>
                                <li><strong><code>sleep(4000)</code>:</strong> Questa riga simula un ritardo di rete di 4 secondi o un'elaborazione pesante.</li>
                                <li><strong>I thread vengono eseguiti in parallelo:</strong> I due client vengono eseguiti contemporaneamente; il thread principale non aspetta che <code>c1</code> finisca prima di avviare <code>c2</code>.</li>
                                <li><strong>Menzione di Daemon:</strong> Potremmo usare <code>setDaemon(true)</code> qui, ma copriremo le sue implicazioni più tardi.</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Placeholder for Code -->
                    <div class="code-wrapper">
                        <div class="code-placeholder h-[500px]" data-code-file="FirstExample.java">
                            <pre id="code-FirstExample.java"></pre>
                        </div>
                        <button class="copy-button" title="Copy code" data-code-file="FirstExample.java">
                            <i class="fa-solid fa-copy"></i>
                            Copy Code
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 7: When to Use Extending Thread -->
        <section id="slide-7" class="slide">
            <div class="slide-content">
                <div class="text-center max-w-4xl">
                    <h2 class="text-5xl font-bold mb-10">Quando Estendere Thread?</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="glass-card p-8">
                            <i class="fa-solid fa-feather text-4xl text-green-400 mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">Casi Semplici</h3>
                            <p class="text-sm text-slate-400">Migliore per progetti piccoli e isolati o script rapidi dove i vincoli architetturali sono minimi.</p>
                        </div>
                        <div class="glass-card p-8">
                            <i class="fa-solid fa-cube text-4xl text-blue-400 mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">Il Thread È l'Oggetto</h3>
                            <p class="text-sm text-slate-400">Quando il concetto dell'oggetto stesso è intrinsecamente un thread (ad es. un semplice scheduler personalizzato).</p>
                        </div>
                        <div class="glass-card p-8 border-red-500/30">
                            <i class="fa-solid fa-ban text-4xl text-red-400 mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">Evitare nei Grandi Sistemi</h3>
                            <p class="text-sm text-slate-400">Perché usa la tua unica opportunità di ereditarietà, non è scalabile per architetture complesse.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 8: 2) Implementing Runnable (Concept) -->
        <section id="slide-8" class="slide">
            <div class="slide-content">
                <div class="glass-card p-12 max-w-4xl w-full">
                    <div class="flex items-center mb-8">
                        <span class="text-8xl font-bold text-slate-700 mr-8">2</span>
                        <h2 class="text-5xl font-bold text-java-blue">Implementare Runnable (Concetto)</h2>
                    </div>
                    <p class="text-2xl text-white mb-8 font-light">Focalizzati sulla Separazione delle Responsabilità</p>
                    <div class="grid grid-cols-2 gap-8">
                        <div class="bg-slate-800 p-6 rounded-lg border border-java-blue">
                            <h3 class="text-xl font-bold text-java-blue mb-2">Runnable Interface</h3>
                            <p class="text-slate-300">Rappresenta la <strong>LOGICA DEL COMPITO</strong>. Definisce <em>cosa</em> deve essere eseguito contemporaneamente.</p>
                            <code class="block mt-4 bg-black p-2 rounded text-sm text-green-400">public void run() { ... }</code>
                        </div>
                        <div class="bg-slate-800 p-6 rounded-lg border border-slate-600">
                            <h3 class="text-xl font-bold text-slate-300 mb-2">Thread Class</h3>
                            <p class="text-slate-400">Rappresenta l'<strong>ESECUTORE</strong>. Definisce <em>come</em> eseguire il compito utilizzando le risorse di sistema.</p>
                            <code class="block mt-4 bg-black p-2 rounded text-sm text-slate-400">new Thread(runnable).start()</code>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 9: Example #2: Implementing Runnable -->
        <section id="slide-9" class="slide">
             <div class="slide-content">
                <div class="w-full max-w-6xl grid grid-cols-2 gap-8 items-center">
                    <div>
                        <h2 class="text-4xl font-bold text-java-blue mb-6">Esempio #2: Implementare Runnable</h2>
                        <div class="space-y-4 text-slate-300">
                            <p>Qui vediamo tre client che utilizzano la stessa logica di compito.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Alice & Bob:</strong> Simulano client che inviano dati creando istanze di una classe che <code>implements Runnable</code>.</li>
                                <li><strong>Third Client (Lambda):</strong> Un'attività client è definita utilizzando un'espressione lambda compatta (uno stile funzionale).</li>
                                <li><strong>Logica Riutilizzabile:</strong> La logica <code>ClientTask</code> è pulitamente separata, rendendola altamente riutilizzabile e testabile.</li>
                                <li><strong>Thread separato dalla logica:</strong> Creiamo esplicitamente oggetti <code>Thread</code> per eseguire le attività <code>Runnable</code>.</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Placeholder for Code -->
                    <div class="code-wrapper">
                        <div class="code-placeholder h-[500px]" data-code-file="SecondExample.java">
                            <pre id="code-SecondExample.java"></pre>
                        </div>
                        <button class="copy-button" title="Copy code" data-code-file="SecondExample.java">
                            <i class="fa-solid fa-copy"></i>
                            Copy Code
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 10: Runnable vs Thread Table -->
        <section id="slide-10" class="slide">
             <div class="slide-content">
                <div class="w-full max-w-5xl">
                    <h2 class="text-4xl font-bold text-center mb-10">Runnable vs. Estendere Thread</h2>
                    <div class="overflow-hidden rounded-xl border border-slate-600">
                        <table class="w-full text-left">
                            <thead class="bg-slate-900 text-java-orange">
                                <tr>
                                    <th class="p-6 text-xl">Caratteristica</th>
                                    <th class="p-6 text-xl">Implementing Runnable</th>
                                    <th class="p-6 text-xl">Extending Thread</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700 bg-slate-800/80">
                                <tr>
                                    <td class="p-6 font-bold">Ereditarietà</td>
                                    <td class="p-6 text-green-400">Più flessibile (può estendere altre classi)</td>
                                    <td class="p-6 text-red-400">Bloccato (ha usato "extends")</td>
                                </tr>
                                <tr>
                                    <td class="p-6 font-bold">Stile di Codice</td>
                                    <td class="p-6">Supporta Lambdas & Method References</td>
                                    <td class="p-6">Richiede definizione di classe esplicita</td>
                                </tr>
                                <tr>
                                    <td class="p-6 font-bold">Thread Pools</td>
                                    <td class="p-6 text-green-400">Necessario per ExecutorService</td>
                                    <td class="p-6 text-red-400">Non compatibile con Thread Pools</td>
                                </tr>
                                <tr>
                                    <td class="p-6 font-bold">Preferito?</td>
                                    <td class="p-6 text-java-blue font-semibold">Sì (Più flessibile, scalabile)</td>
                                    <td class="p-6 text-red-400">No (Solo per casi semplici)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6 text-center text-xl font-bold text-java-blue">
                        <i class="fa-solid fa-thumbs-up mr-2"></i> Verdetto: Preferisci Runnable!
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 11: 3) ExecutorService (Concept) -->
        <section id="slide-11" class="slide">
            <div class="slide-content">
                <div class="glass-card p-8 md:p-12 max-w-5xl w-full relative">
                    <div class="absolute top-4 left-4 bg-green-500 rounded-full w-12 h-12 flex items-center justify-center shadow-lg z-10 group hover:">
                        <i class="fa-solid fa-star text-white text-xl"></i>
                    </div>
                    <div class="absolute top-16 left-4 bg-green-500 text-white px-3 py-1 rounded-lg text-sm font-semibold opacity-0 hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Advanced</div>
                    <div class="flex flex-col md:flex-row items-center md:items-start mb-8 gap-4">
                        <span class="text-6xl md:text-8xl font-bold text-slate-700">3</span>
                        <h2 class="text-4xl md:text-5xl font-bold text-purple-400">ExecutorService (Concetto)</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div class="space-y-6">
                            <p class="text-lg md:text-xl text-slate-300 font-bold">
                                La soluzione moderna per gestire la concorrenza utilizzando Thread Pools.
                            </p>
                            <ul class="list-disc pl-5 space-y-2 text-slate-400 text-sm md:text-base">
                                <li><strong>Thread Pools:</strong> Gestisce un numero fisso di thread worker, evitando il sovraccarico di crearne di nuovi costantemente.</li>
                                <li><strong>Evita la Creazione Manuale:</strong> Invii il compito; l'ExecutorService gestisce la meccanica del thread.</li>
                                <li><strong>Ideale per Server:</strong> Essenziale per gestire le richieste simultanee in modo efficiente e prevenire l'esaurimento delle risorse di sistema.</li>
                                <li><strong>Pianificazione Automatica:</strong> I compiti vengono messi in coda e pianificati automaticamente quando un thread diventa disponibile.</li>
                            </ul>
                        </div>
                        <div class="flex justify-center items-center">
                            <img src="assets/Executor-service.png" class="rounded-lg shadow-lg max-w-full h-auto max-h-[400px] md:max-h-[500px] object-contain" alt="Executor Service Diagram">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 12: Example #3: ExecutorService / Thread Pool -->
        <section id="slide-12" class="slide">
             <div class="slide-content">
                <div class="w-full max-w-6xl grid grid-cols-2 gap-8 items-center relative group">
                    <div class="absolute top-2 left-2 bg-green-500 rounded-full w-12 h-12 flex items-center justify-center shadow-lg z-10">
                        <i class="fa-solid fa-star text-white text-xl"></i>
                    </div>
                    <div class="absolute top-14 left-2 bg-green-500 text-white px-3 py-1 rounded-lg text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Advanced</div>
                    <div>
                        <h2 class="text-4xl font-bold text-purple-400 mb-6">Esempio #3: ExecutorService</h2>
                        <div class="space-y-4 text-slate-300">
                            <p>Questo simula perfettamente molti client che si connettono a un server.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Rileva Core CPU:</strong> Otteniamo il numero di processori disponibili per creare un pool di dimensioni ottimali.</li>
                                <li><strong>Crea Pool Fisso:</strong> <code>Executors.newFixedThreadPool()</code> crea un pool con un numero fisso di thread worker.</li>
                                <li><strong>Invia Compiti Client:</strong> Utilizziamo <code>executor.submit(runnableTask)</code> per dare i compiti al pool.</li>
                                <li><strong>Gestione Efficiente:</strong> Il pool li elabora in modo efficiente, riutilizzando i thread worker.</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Placeholder for Code -->
                    <div class="code-wrapper">
                        <div class="code-placeholder h-[500px]" data-code-file="ThirdExample.java">
                            <pre id="code-ThirdExample.java"></pre>
                        </div>
                        <button class="copy-button" title="Copy code" data-code-file="ThirdExample.java">
                            <i class="fa-solid fa-copy"></i>
                            Copy Code
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 13: ExecutorService Advantages -->
        <section id="slide-13" class="slide">
            <div class="slide-content">
                <div class="w-full max-w-4xl relative group">
                    <div class="absolute top-0 left-0 bg-green-500 rounded-full w-12 h-12 flex items-center justify-center shadow-lg z-10">
                        <i class="fa-solid fa-star text-white text-xl"></i>
                    </div>
                    <div class="absolute top-12 left-0 bg-green-500 text-white px-3 py-1 rounded-lg text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Advanced</div>
                    <h2 class="text-5xl font-bold mb-10 text-center text-purple-400">Vantaggi di ExecutorService</h2>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="glass-card p-6 bg-slate-700/50">
                            <i class="fa-solid fa-gauge-high text-3xl text-green-400 mb-3"></i>
                            <h3 class="text-xl font-bold">Velocità</h3>
                            <p class="text-slate-400">Riutilizzare i thread è molto più veloce che creare e distruggere un nuovo thread per ogni singolo compito.</p>
                        </div>
                         <div class="glass-card p-6 bg-slate-700/50">
                            <i class="fa-solid fa-recycle text-3xl text-blue-400 mb-3"></i>
                            <h3 class="text-xl font-bold">Riutilizzabilità</h3>
                            <p class="text-slate-400">I thread worker sottostanti vengono riciclati, riducendo il consumo di risorse e migliorando il throughput.</p>
                        </div>
                        <div class="glass-card p-6 bg-slate-700/50">
                            <i class="fa-solid fa-arrows-up-down text-3xl text-java-orange mb-3"></i>
                            <h3 class="text-xl font-bold">Scalabilità</h3>
                            <p class="text-slate-400">Limita l'utilizzo delle risorse e garantisce che l'applicazione non sovraccarichi il server con troppi thread concorrenti.</p>
                        </div>
                        <div class="glass-card p-6 bg-slate-700/50">
                            <i class="fa-solid fa-broom text-3xl text-pink-400 mb-3"></i>
                            <h3 class="text-xl font-bold">Codice Più Pulito</h3>
                            <p class="text-slate-400">Astrae la gestione manuale dei thread, portando a codice di concorrenza più semplice e leggibile.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 14: Thread Lifecycle -->
        <section id="slide-14" class="slide">
            <div class="slide-content">
                <div class="w-full max-w-6xl px-4">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6 md:mb-8 text-java-blue text-center">Il Ciclo di Vita dei Thread Java</h2>
                    <p class="text-lg md:text-xl text-slate-400 mb-6 text-center">Un thread passa attraverso diversi stati definiti dalla creazione fino alla morte.</p>
                    
                    <div class="flex flex-col lg:flex-row justify-center gap-6 items-start lg:items-center">
                        <div class="flex-1 space-y-3 md:space-y-4 w-full">
                            <div class="p-3 md:p-4 bg-slate-800 rounded-lg">
                                <h3 class="text-xl md:text-2xl font-bold text-java-orange">NEW</h3>
                                <p class="text-sm md:text-base text-slate-300">L'oggetto Thread è stato creato ma non ancora avviato (<code>new Thread()</code>).</p>
                            </div>
                            <div class="p-3 md:p-4 bg-slate-800 rounded-lg">
                                <h3 class="text-xl md:text-2xl font-bold text-java-orange">RUNNABLE</h3>
                                <p class="text-sm md:text-base text-slate-300">Il thread è pronto per eseguire e in attesa dello scheduler del sistema operativo (dopo <code>.start()</code>).</p>
                            </div>
                            <div class="p-3 md:p-4 bg-slate-800 rounded-lg">
                                <h3 class="text-xl md:text-2xl font-bold text-java-orange">RUNNING</h3>
                                <p class="text-sm md:text-base text-slate-300">Il thread sta attivamente eseguendo il suo metodo <code>run()</code> sulla CPU.</p>
                            </div>
                             <div class="p-3 md:p-4 bg-slate-800 rounded-lg">
                                <h3 class="text-xl md:text-2xl font-bold text-java-orange">BLOCKED/WAITING</h3>
                                <p class="text-sm md:text-base text-slate-300">Il thread è temporaneamente in pausa (ad es. in attesa di un lock, <code>.sleep()</code>, o <code>.join()</code>).</p>
                            </div>
                            <div class="p-3 md:p-4 bg-slate-800 rounded-lg">
                                <h3 class="text-xl md:text-2xl font-bold text-java-orange">TERMINATED</h3>
                                <p class="text-sm md:text-base text-slate-300">Il thread ha finito l'esecuzione (il metodo <code>run()</code> è completato o si è verificata un'eccezione).</p>
                            </div>
                        </div>
                        <div class="flex-1 flex justify-center items-center w-full">
                            <img src="assets/thread_life_cycle.png" class="rounded-lg shadow-lg max-w-full h-auto max-h-[450px] md:max-h-[550px] object-contain" alt="Thread Lifecycle Diagram">
                        </div>
                    </div>

                    <p class="text-base md:text-lg text-slate-500 mt-6 text-center">I metodi che copriremo in seguito sono quelli che controllano queste transizioni.</p>
                </div>
            </div>
        </section>

        <!-- SLIDE 15: Essential Thread Control Methods (Overview) -->
        <section id="slide-15" class="slide">
            <div class="slide-content">
                <div class="w-full max-w-4xl">
                    <h2 class="text-5xl font-bold mb-10 text-center text-java-orange">Metodi Essenziali di Controllo dei Thread</h2>
                    <p class="text-xl text-slate-300 mb-8 text-center">Questi metodi ti consentono di gestire lo stato, la priorità e le interazioni di un thread.</p>
                    
                    <div class="grid grid-cols-3 gap-4">
                        <div class="method-box green-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-green-400 cursor-pointer" data-slide="16">.start()</div>
                        <div class="method-box red-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-red-400 cursor-pointer" data-slide="16">.run()</div>
                        <div class="method-box yellow-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-yellow-400 cursor-pointer" data-slide="16">.sleep()</div>
                        <div class="method-box green-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-green-400 cursor-pointer" data-slide="16">.isAlive()</div>
                        <div class="method-box yellow-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-yellow-400 cursor-pointer" data-slide="17">.join()</div>
                        <div class="method-box java-blue text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-java-blue cursor-pointer" data-slide="19">.setDaemon()</div>
                        <div class="method-box red-400 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-red-400 cursor-pointer" data-slide="18">.interrupt()</div>
                        <div class="method-box slate-500 text-center p-4 bg-slate-900 rounded-lg font-mono text-xl text-slate-500 cursor-pointer" data-slide="20">.stop() (Deprecated)</div>
                    </div>

                    <p class="text-2xl font-bold text-center mt-12 text-white">Ora vediamo ciascuno rapidamente.</p>
                </div>
            </div>
        </section>

        <!-- SLIDE 16: .isAlive() -->
        <section id="slide-16" class="slide">
            <div class="slide-content">
                <div class="glass-card p-10 w-full max-w-5xl">
                    <h2 class="text-5xl font-bold mb-6 text-java-orange"><code>.isAlive()</code></h2>
                    <div class="space-y-6">
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Cosa fa:</h3>
                            <p class="text-slate-300">Controlla se il thread è stato avviato e non è ancora morto. Restituisce <code>true</code> se il thread è nello stato Runnable o Blocked/Waiting.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Esempio:</h3>
                            <pre class="font-mono text-sm bg-code-bg p-3 rounded text-green-400">Thread t = new Thread(() -> { /* Logica del compito qui */ });
t.start();
System.out.println(t.isAlive()); // true (solitamente)
</pre>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Caso d'Uso:</h3>
                            <p class="text-slate-300">Controllare quando un processo in background (come un download di file o un calcolo pesante) è ancora attivamente in esecuzione.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 17: .join() -->
        <section id="slide-17" class="slide">
            <div class="slide-content">
                <div class="glass-card p-10 w-full max-w-5xl">
                    <h2 class="text-5xl font-bold mb-6 text-java-blue"><code>.join()</code></h2>
                    <div class="space-y-6">
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Cosa fa:</h3>
                            <p class="text-slate-300">Causa che il thread attuale (ad es. il thread <code>main</code>) aspetti fino a quando il thread su cui viene chiamato (ad es. <code>t1</code>) termina l'esecuzione.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Mini-Esempio:</h3>
                            <pre class="font-mono text-sm bg-code-bg p-3 rounded text-green-400">t1.start();
t1.join(); // &lt;-- Il thread main aspetta qui
System.out.println("t1 completato"); // Stampa solo dopo che t1 è terminato
</pre>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Caso d'Uso:</h3>
                            <p class="text-slate-300">Assicurare che un passo di pre-elaborazione critico, come inizializzare una risorsa o aspettare che un client finisca di inviare i dati di configurazione, sia completato prima che il programma proceda.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 18: .interrupt() -->
        <section id="slide-18" class="slide">
            <div class="slide-content">
                <div class="glass-card p-10 w-full max-w-5xl">
                    <h2 class="text-5xl font-bold mb-6 text-red-400"><code>.interrupt()</code></h2>
                    <div class="space-y-6">
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Cosa fa:</h3>
                            <p class="text-slate-300">Imposta il flag di stato di interrupt del thread su <code>true</code>. È una <strong>richiesta educata</strong> al thread di smettere di fare quello che sta facendo.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg border-l-4 border-red-500">
                            <h3 class="text-xl font-bold mb-2 text-red-300">Importante:</h3>
                            <p class="text-slate-300">NON forza il thread a fermarsi. Il thread deve controllare il flag (<code>Thread.interrupted()</code>) o catturare un'<code>InterruptedException</code> (se in sleep/wait) per terminare delicatamente.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Caso d'Uso:</h3>
                            <p class="text-slate-300">Annullare loop o calcoli lunga esecuzione, o fermare in sicurezza un thread bloccato in uno stato <code>sleep()</code> o <code>wait()</code>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 19: .setDaemon(true) -->
        <section id="slide-19" class="slide">
            <div class="slide-content">
                <div class="glass-card p-10 w-full max-w-5xl">
                    <h2 class="text-5xl font-bold mb-6 text-purple-400"><code>.setDaemon(true)</code></h2>
                    <div class="space-y-6">
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Cosa fa:</h3>
                            <p class="text-slate-300">Trasforma un thread in un <strong>thread background</strong> (o thread Daemon). La JVM non aspetterà che questi thread finiscano.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">La Regola:</h3>
                            <p class="text-slate-300 font-bold">L'intera applicazione Java termina quando tutti i thread **non-daemon** (utente) hanno finito l'esecuzione.</p>
                        </div>
                        <div class="bg-slate-700/50 p-4 rounded-lg">
                            <h3 class="text-xl font-bold mb-2">Caso d'Uso:</h3>
                            <p class="text-slate-300">Ideale per compiti background non critici e continui come logging, raccolta di spazzatura (garbage collection) o monitoraggio del battito cardiaco.</p>
                        </div>
                         <p class="text-lg text-yellow-400 font-semibold pt-4">
                            Collegamento all'Esempio 1: In <code>FirstExample</code>, impostare <code>c2.setDaemon(true)</code> farebbe arrestare <code>c2</code> istantaneamente quando il thread <code>main</code> finisce.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 20: .stop() (Deprecated) -->
        <section id="slide-20" class="slide">
            <div class="slide-content">
                <div class="glass-card p-10 w-full max-w-5xl text-center border-4 border-red-600 bg-red-900/20">
                    <i class="fa-solid fa-skull-crossbones text-7xl text-red-500 mb-6"></i>
                    <h2 class="text-5xl font-extrabold mb-6 text-red-500"><code>.stop()</code> (Deprecato)</h2>
                    <div class="space-y-4 text-xl">
                        <h3 class="text-2xl font-bold text-red-400">Perché NON Devi Usarlo:</h3>
                        <ul class="list-none space-y-2 text-slate-300">
                            <li><strong class="text-red-300">Uccide i Thread Istantaneamente:</strong> Forza il thread a fermarsi senza dargli la possibilità di ripulire.</li>
                            <li><strong class="text-red-300">Corruzione dei Dati:</strong> Lascia qualsiasi risorsa condivisa (come connessioni al database o lock di oggetti) in uno stato impredibile e corrotto.</li>
                            <li><strong class="text-red-300">Non Sicuro:</strong> Porta a instabilità dell'applicazione e errori difficili da debug.</li>
                        </ul>
                    </div>
                    <p class="text-xl font-mono mt-8 text-slate-500">
                        Menzionato solo perché esiste — <strong class="text-red-400">nessuno lo usa</strong> nel codice Java moderno e sicuro.
                    </p>
                </div>
            </div>
        </section>

        <!-- SLIDE 21: Summary of Thread Controls -->
        <section id="slide-21" class="slide">
             <div class="slide-content">
                <div class="w-full max-w-5xl">
                    <h2 class="text-4xl font-bold text-center mb-10 text-java-orange">Summary of Thread Controls</h2>
                    <div class="overflow-hidden rounded-xl border border-slate-600">
                        <table class="w-full text-left control-table">
                            <thead>
                                <tr>
                                    <th class="text-xl">Metodo</th>
                                    <th class="text-xl">Cosa fa</th>
                                    <th class="text-xl">Sicurezza/Uso</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700 bg-slate-900/50">
                                <tr>
                                    <td class="font-mono text-java-orange"><code>.isAlive()</code></td>
                                    <td>Controlla se il thread è attualmente in esecuzione o runnable.</td>
                                    <td class="text-green-400">Sicuro</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-java-blue"><code>.join()</code></td>
                                    <td>Fa aspettare il thread chiamante fino a quando questo thread finisce.</td>
                                    <td class="text-green-400">Sicuro</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-red-400"><code>.interrupt()</code></td>
                                    <td>Chiede educatamente al thread di fermarsi (imposta un flag).</td>
                                    <td class="text-yellow-400">Necessita cooperazione del thread</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-purple-400"><code>.setDaemon()</code></td>
                                    <td>Trasforma il thread in un servizio di pulizia in background.</td>
                                    <td class="text-green-400">Sicuro</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-slate-500"><code>.stop()</code></td>
                                    <td>Uccide il thread istantaneamente.</td>
                                    <td class="text-red-500">❌ Morto, Non Usare Mai</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 22: Bringing It All Together -->
        <section id="slide-22" class="slide">
             <div class="slide-content">
                <div class="w-full max-w-5xl">
                    <h2 class="text-4xl font-bold text-center mb-10 text-java-blue">Mettendo Tutto Insieme: Riepilogo</h2>
                    <div class="overflow-hidden rounded-xl border border-slate-600">
                        <table class="w-full text-left">
                            <thead class="bg-slate-800 text-java-orange">
                                <tr>
                                    <th class="p-4 text-xl">Concetto</th>
                                    <th class="p-4 text-xl">Esempio Usato</th>
                                    <th class="p-4 text-xl">Scopo</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700 bg-slate-800/80">
                                <tr>
                                    <td class="p-4 font-bold">Extending Thread</td>
                                    <td class="p-4 font-mono text-yellow-400">FirstExample</td>
                                    <td class="p-4">Definizione client semplice e diretta.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-bold">Implementing Runnable</td>
                                    <td class="p-4 font-mono text-yellow-400">SecondExample</td>
                                    <td class="p-4">Separazione della logica di compito e esecuzione del thread.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-bold">ExecutorService</td>
                                    <td class="p-4 font-mono text-yellow-400">ThirdExample</td>
                                    <td class="p-4">Gestione efficiente e scalabile di molti client (lato server).</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-bold"><code>sleep()</code></td>
                                    <td class="p-4 font-mono text-yellow-400">FirstExample</td>
                                    <td class="p-4">Simulazione di ritardo di rete/attesa.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-bold">Lambdas</td>
                                    <td class="p-4 font-mono text-yellow-400">Second & Third</td>
                                    <td class="p-4">Definizione compatta di compiti (Runnable).</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-bold">Daemon Thread</td>
                                    <td class="p-4 font-mono text-yellow-400">FirstExample (opzionale)</td>
                                    <td class="p-4">Assicurati che il lavoro di background si fermi con l'applicazione principale.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 23: Real-World Message -->
        <section id="slide-23" class="slide">
            <div class="slide-content">
                <div class="glass-card p-12 max-w-4xl w-full text-center">
                    <i class="fa-solid fa-rocket text-6xl text-green-400 mb-6"></i>
                    <h2 class="text-5xl font-extrabold mb-6 text-java-orange">Il Messaggio del Mondo Reale</h2>
                    <p class="text-2xl text-slate-200 leading-relaxed">
                        In quasi tutte le moderne applicazioni Java ad alte prestazioni (soprattutto server), il pattern preferito è:
                    </p>
                    <div class="mt-8 p-6 bg-slate-900 rounded-xl shadow-lg border-l-4 border-java-blue">
                        <span class="text-3xl font-mono text-white">Runnable + ExecutorService</span>
                        <p class="text-slate-400 mt-2 text-lg">
                            (Questo, combinato con concetti più nuovi come i Virtual Threads di Java, definisce come costruire la concorrenza scalabile.)
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 24: Questions -->
        <section id="slide-24" class="slide">
            <div class="slide-content">
                <div class="text-center space-y-6 max-w-4xl p-10 glass-card">
                    <h1 class="text-7xl font-extrabold tracking-tight text-java-orange">
                        Q & A
                    </h1>
                    <p class="text-2xl text-slate-300 font-light mt-6">
                        Grazie per la vostra attenzione.<br>
                        Abbiamo 3-5 minuti rimasti per domande!
                    </p>
                    <div class="mt-12 pt-8 border-t border-slate-700">
                        <p class="text-lg text-slate-400">Sentitevi liberi di fare domande sui diagrammi, metodi o il ciclo di vita.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Navigation Buttons (Fixed on sides, Desktop Only) -->
    <button id="nav-up" class="nav-button nav-up opacity-0" aria-label="Previous Slide">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
    </button>
    <button id="nav-down" class="nav-button nav-down" aria-label="Next Slide">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
    </button>

    <!-- Progress Bar (Fixed at the bottom) -->
    <div id="progress-bar-container">
        <div id="progress-bar-fill"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('presentation-container');
            const slides = document.querySelectorAll('.slide');
            const progressBarFill = document.getElementById('progress-bar-fill');
            const navUp = document.getElementById('nav-up');
            const navDown = document.getElementById('nav-down');
            const introScreen = document.getElementById('intro-screen');
            let currentSlideIndex = 0; // Track the current active slide index

            // --- Intro Screen Auto-Fade ---
            function initializeIntroScreen() {
                // Auto-fade intro screen after 4.5 seconds
                setTimeout(() => {
                    introScreen.classList.add('fade-out');
                }, 4500);

                // Allow clicking intro screen to skip it
                introScreen.addEventListener('click', () => {
                    introScreen.classList.add('fade-out');
                });
            }

                // --- Confetti Effect ---
                let confettiTimeout;
                function triggerConfetti() {
                    // Clear any existing timeout to prevent overlapping confetti
                    clearTimeout(confettiTimeout);

                    // Create confetti pieces
                    const confettiCount = 50;
                    const colors = ['#f89820', '#5382a1', '#10b981', '#fbbf24', '#a78bfa', '#ec4899', '#06b6d4'];

                    for (let i = 0; i < confettiCount; i++) {
                        const confetti = document.createElement('div');
                        confetti.classList.add('confetti');

                        // Random horizontal start position across the width
                        const xPos = Math.random() * window.innerWidth;
                        confetti.style.left = xPos + 'px';

                        // Random color
                        const color = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.backgroundColor = color;

                        // Random size
                        const size = Math.random() * 10 + 6; // 6-16px
                        confetti.style.width = size + 'px';
                        confetti.style.height = size + 'px';

                        // Random animation delay for staggered effect
                        const delay = Math.random() * 0.6; // up to 0.6s
                        // Random drift (horizontal travel) and duration
                        const drift = (Math.random() * 2 - 1) * (window.innerWidth * 0.25); // +/-25% screen width
                        const duration = Math.random() * 1.2 + 1.6; // 1.6s - 2.8s

                        confetti.style.setProperty('--drift', drift + 'px');
                        confetti.style.setProperty('--duration', duration + 's');
                        confetti.style.setProperty('--delay', delay + 's');
                        confetti.style.animationDelay = delay + 's';

                        // Slight rotation origin offset
                        confetti.style.transformOrigin = 'center center';

                        // Append to body
                        document.body.appendChild(confetti);
                    }

                    // Remove confetti pieces after animation completes (allow for delay + duration)
                    confettiTimeout = setTimeout(() => {
                        const confettiPieces = document.querySelectorAll('.confetti');
                        confettiPieces.forEach(piece => piece.remove());
                    }, 4000);
                }
            // --- Sample Java Code for Different Examples ---
            const javaCodeSamples = {
                'FirstExample.java': `class Client extends Thread {
    private int id;

    Client(int id) {
        this.id = id;
    }

    public void run() {
        System.out.println("Client " + id + " is connecting");
        try {
            Thread.sleep(4000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Client " + id + " connected!");
    }
}

public class FirstExample {
    public static void main(String[] args) {
        Client c1 = new Client(1);
        Client c2 = new Client(2);

        c1.start();
        //c2.setDaemon(true);
        c2.start();
    }
}`,
                'SecondExample.java': `class ClientTask implements Runnable {
    private String name;

    ClientTask(String name) {
        this.name = name;
    }

    public void run() {
        System.out.println(name + " is sending data");
    }
}

public class SecondExample {
    public static void main(String[] args) {
        Thread t1 = new Thread(new ClientTask("Alice"));
        Thread t2 = new Thread(new ClientTask("Bob"));

        new Thread(() -> System.out.println("Im the 3rd child")).start();

        t1.start();
        t2.start();
    }
}`,
                'ThirdExample.java': `import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ThirdExample {
    public static void main(String[] args) {
        int coreCount = Runtime.getRuntime().availableProcessors();
        ExecutorService pool = Executors.newFixedThreadPool(coreCount);

        // Java 21+
        //ExecutorService pool = Executors.newVirtualThreadPerTaskExecutor();

        // Runnable r = () -> {
        //     System.out.println("Im runnable instance in execution");
        //     int a=2, b=5;
        //     int x = a + b;
        //     try {
        //         Thread.sleep(3000);
        //     } catch (Exception e) {
        //         System.out.println("Exception:" + e.getMessage());
        //     }
        //     System.out.println("my calculation result is: " + x);
        // };

        pool.submit(() -> System.out.println("Client A handled"));
        pool.submit(() -> System.out.println("Client B handled"));
        // pool.submit(r);
        pool.submit(() -> System.out.println("Client C handled"));

        pool.shutdown();
    }
}`
            };

            // --- Copy Button Functionality ---
            function setupCopyButtons() {
                const copyButtons = document.querySelectorAll('.copy-button');
                
                copyButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();

                        // Get the code file name from the button's data attribute
                        const codeFile = this.getAttribute('data-code-file');
                        const javaCode = javaCodeSamples[codeFile] || `// ${codeFile} placeholder`;

                        // Copy to clipboard using modern Clipboard API
                        navigator.clipboard.writeText(javaCode).then(() => {
                            // Show feedback
                            const originalText = this.innerHTML;
                            this.classList.add('copied');
                            this.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';

                            // Reset after 2 seconds
                            setTimeout(() => {
                                this.classList.remove('copied');
                                this.innerHTML = originalText;
                            }, 2000);
                        }).catch(err => {
                            console.error('Failed to copy: ', err);
                            alert('Failed to copy code. Please try again.');
                        });
                    });
                });
            }

            // --- Slide Index Management and Progress Update ---
            function updateActiveSlide() {
                // Mobile-aware active-slide detection.
                // On large screens we keep the original viewport-per-slide math.
                // On small screens (mobile) we determine which slide has the largest
                // visible area inside the container and mark that as active.
                let index = 0;

                const containerRect = container.getBoundingClientRect();

                if (window.innerWidth <= 640) {
                    // Choose slide with max visible height inside the container
                    let maxVisible = -1;
                    slides.forEach((slide, i) => {
                        const rect = slide.getBoundingClientRect();
                        const top = Math.max(rect.top, containerRect.top);
                        const bottom = Math.min(rect.bottom, containerRect.bottom);
                        const visibleHeight = Math.max(0, bottom - top);
                        if (visibleHeight > maxVisible) {
                            maxVisible = visibleHeight;
                            index = i;
                        }
                    });
                } else {
                    // Desktop: use existing snap-based calculation
                    const slideHeight = container.clientHeight;
                    const scrollPosition = container.scrollTop;
                    index = Math.round(scrollPosition / slideHeight);
                }

                // Clamp index
                currentSlideIndex = Math.max(0, Math.min(index, slides.length - 1));

                // 1. Update Progress Bar
                const progressPercentage = ((currentSlideIndex + 1) / slides.length) * 100;
                progressBarFill.style.width = `${progressPercentage}%`;

                // 2. Update Active State for Animation
                slides.forEach((slide, i) => {
                    slide.setAttribute('data-active', i === currentSlideIndex ? 'true' : 'false');
                });

                // 3. Update Navigation Button Visibility/Opacity
                navUp.classList.toggle('opacity-0', currentSlideIndex === 0);
                navUp.classList.toggle('pointer-events-none', currentSlideIndex === 0);
                navDown.classList.toggle('opacity-0', currentSlideIndex === slides.length - 1);
                navDown.classList.toggle('pointer-events-none', currentSlideIndex === slides.length - 1);

                // 4. Trigger Confetti on Q&A Slide (Last Slide)
                if (currentSlideIndex === slides.length - 1) {
                    triggerConfetti();
                }
            }

            // Listen for scroll events to keep the progress bar, active state, and buttons updated
            container.addEventListener('scroll', updateActiveSlide);

            // Run initially to set the correct state on load
            updateActiveSlide();

            // --- Navigation Logic ---
            function goToSlide(index) {
                if (index >= 0 && index < slides.length) {
                    // The CSS scroll-behavior: smooth handles the transition
                    slides[index].scrollIntoView({ behavior: 'smooth' });
                }
            }

            // Button click handlers
            navUp.addEventListener('click', () => {
                goToSlide(currentSlideIndex - 1);
            });

            navDown.addEventListener('click', () => {
                goToSlide(currentSlideIndex + 1);
            });

            // Keyboard Navigation (Arrow Keys)
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowUp') {
                    e.preventDefault(); // Prevent default browser scroll
                    goToSlide(currentSlideIndex - 1);
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault(); // Prevent default browser scroll
                    goToSlide(currentSlideIndex + 1);
                }
            });

            // Ensure the first slide is active on first load
            if (slides.length > 0) {
                slides[0].setAttribute('data-active', 'true');
            }

            // Initialize copy buttons
            setupCopyButtons();

            // --- Populate Code Placeholders ---
            function populateCodePlaceholders() {
                Object.keys(javaCodeSamples).forEach(fileName => {
                    const codeElement = document.getElementById(`code-${fileName}`);
                    if (codeElement) {
                        codeElement.textContent = javaCodeSamples[fileName];
                    }
                });
            }

            populateCodePlaceholders();

            // Initialize intro screen
            initializeIntroScreen();

            // --- Method Box Click Navigation ---
            function setupMethodBoxNavigation() {
                const methodBoxes = document.querySelectorAll('.method-box[data-slide]');
                methodBoxes.forEach(box => {
                    box.addEventListener('click', function() {
                        const slideNumber = parseInt(this.getAttribute('data-slide'));
                        goToSlide(slideNumber - 1); // Convert to 0-based index
                    });
                });
            }

            setupMethodBoxNavigation();

            // --- 3D NEON BACKGROUND WITH THREE.JS ---
            let threeJsScene = null;
            // Start with a flat CSS background by default (Three.js disabled)
            let threeJsEnabled = false;

            function initThreeJsBackground() {
                if (threeJsScene) return; // Already initialized

                // Create canvas and scene
                const canvas = document.createElement('canvas');
                canvas.id = 'three-js-bg';
                // Put canvas behind everything (use -2) so the overlay can sit between canvas and slides
                canvas.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; display: block; pointer-events: none;';
                document.body.insertBefore(canvas, document.body.firstChild);

                // Create a blur/dim overlay that sits above the canvas but below page content
                const overlay = document.createElement('div');
                overlay.id = 'bg-blur-overlay';
                // Inline style as a fallback if CSS doesn't apply yet
                overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; backdrop-filter: blur(6px) saturate(1.15); -webkit-backdrop-filter: blur(6px) saturate(1.15); background: rgba(8,10,18,0.10);';
                // Insert overlay directly after canvas
                canvas.parentNode.insertBefore(overlay, canvas.nextSibling);

                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0x0a0e27, 0); // Deep space blue
                camera.position.z = 15;

                // Store scene data
                threeJsScene = { scene, camera, renderer, objects: [], particles: [], overlay };

                // Create particles for more neon effect
                const particleGeometry = new THREE.BufferGeometry();
                const particleCount = 2000;
                const particlePositions = new Float32Array(particleCount * 3);
                const particleVelocities = new Float32Array(particleCount * 3);

                for (let i = 0; i < particleCount * 3; i += 3) {
                    particlePositions[i] = (Math.random() - 0.5) * 80;
                    particlePositions[i + 1] = (Math.random() - 0.5) * 80;
                    particlePositions[i + 2] = (Math.random() - 0.5) * 60;
                    
                    particleVelocities[i] = (Math.random() - 0.5) * 0.01;
                    particleVelocities[i + 1] = (Math.random() - 0.5) * 0.01;
                    particleVelocities[i + 2] = (Math.random() - 0.5) * 0.01;
                }

                particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
                const particleMaterial = new THREE.PointsMaterial({
                    color: 0x00ffff,
                    size: 0.3,
                    sizeAttenuation: true,
                    transparent: true,
                    opacity: 1.0,
                    emissive: 0x00ffff,
                    emissiveIntensity: 1.5
                });

                const particles = new THREE.Points(particleGeometry, particleMaterial);
                scene.add(particles);
                threeJsScene.particles = { mesh: particles, velocities: particleVelocities };

                // Enhanced Neon Lighting
                const light1 = new THREE.PointLight(0x00ffff, 3.5, 200);
                light1.position.set(30, 30, 30);
                scene.add(light1);

                const light2 = new THREE.PointLight(0xff00ff, 3.5, 200);
                light2.position.set(-30, -30, 30);
                scene.add(light2);

                const light3 = new THREE.PointLight(0x00ff00, 3.0, 180);
                light3.position.set(0, 40, -20);
                scene.add(light3);

                const light4 = new THREE.PointLight(0xff0080, 3.0, 180);
                light4.position.set(-40, 0, -20);
                scene.add(light4);

                const ambientLight = new THREE.AmbientLight(0x1a1a3f, 0.4);
                scene.add(ambientLight);

                // Mouse tracking for parallax
                let mouseX = 0, mouseY = 0;
                let targetMouseX = 0, targetMouseY = 0;
                
                document.addEventListener('mousemove', (e) => {
                    targetMouseX = (e.clientX / window.innerWidth) * 2 - 1;
                    targetMouseY = -(e.clientY / window.innerHeight) * 2 + 1;
                });

                // Animation loop
                let frameCount = 0;
                function animate() {
                    requestAnimationFrame(animate);

                    if (!threeJsEnabled) {
                        renderer.render(scene, camera);
                        return;
                    }

                    frameCount++;
                    
                    // Smooth mouse movement
                    mouseX += (targetMouseX - mouseX) * 0.1;
                    mouseY += (targetMouseY - mouseY) * 0.1;

                    // Update particles
                    const posAttr = threeJsScene.particles.mesh.geometry.getAttribute('position');
                    const positions = posAttr.array;
                    const velocities = threeJsScene.particles.velocities;

                    for (let i = 0; i < positions.length; i += 3) {
                        positions[i] += velocities[i];
                        positions[i + 1] += velocities[i + 1];
                        positions[i + 2] += velocities[i + 2];

                        if (positions[i] > 40) positions[i] = -40;
                        if (positions[i] < -40) positions[i] = 40;
                        if (positions[i + 1] > 40) positions[i + 1] = -40;
                        if (positions[i + 1] < -40) positions[i + 1] = 40;
                        if (positions[i + 2] > 30) positions[i + 2] = -30;
                        if (positions[i + 2] < -30) positions[i + 2] = 30;
                    }
                    posAttr.needsUpdate = true;

                    // Dynamic lighting movement
                    scene.children.forEach((light, idx) => {
                        if (light.isPointLight) {
                            light.position.x += Math.sin(frameCount * 0.002 + idx) * 0.03;
                            light.position.y += Math.cos(frameCount * 0.002 + idx) * 0.03;
                        }
                    });

                    // Mouse parallax with more intensity
                    camera.position.x = mouseX * 5;
                    camera.position.y = mouseY * 5;
                    camera.position.z = 15 + Math.sin(frameCount * 0.003) * 2;
                    camera.lookAt(0, 0, 0);

                    renderer.render(scene, camera);
                }

                animate();

                // Handle window resize
                window.addEventListener('resize', () => {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                    renderer.setSize(width, height);
                });
            }

            function removeThreeJsBackground() {
                if (!threeJsScene) return;
                
                const canvas = document.getElementById('three-js-bg');
                if (canvas) canvas.remove();
                const overlayEl = document.getElementById('bg-blur-overlay');
                if (overlayEl) overlayEl.remove();
                
                threeJsScene.scene.traverse(obj => {
                    if (obj.geometry) obj.geometry.dispose();
                    if (obj.material) {
                        if (Array.isArray(obj.material)) {
                            obj.material.forEach(m => m.dispose());
                        } else {
                            obj.material.dispose();
                        }
                    }
                });
                
                threeJsScene.renderer.dispose();
                threeJsScene = null;
            }

            // F1 key to toggle 3D background. First press initializes + enables it.
            document.addEventListener('keydown', (e) => {
                if (e.key === 'F1') {
                    e.preventDefault();
                    if (threeJsScene) {
                        threeJsEnabled = !threeJsEnabled;
                        const canvasEl = document.getElementById('three-js-bg');
                        const overlayEl = document.getElementById('bg-blur-overlay');
                        if (canvasEl) canvasEl.style.display = threeJsEnabled ? 'block' : 'none';
                        if (overlayEl) overlayEl.style.display = threeJsEnabled ? 'block' : 'none';
                    } else {
                        // Initialize and enable on first toggle
                        initThreeJsBackground();
                        threeJsEnabled = true;
                    }
                }
            });
        });
    </script>

    <!-- Load Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</body>
</html>